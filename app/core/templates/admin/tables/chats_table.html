{% extends '../../admin-dashboard.html' %}

{% block data %}
<table class="table table-striped table-bordered align-middle">
  <thead class="table-light">
    <tr>
      <th>ID</th>
      <th>Participants</th>
      <th>Created At</th>
      <th>Updated At</th>
    </tr>
  </thead>
  <tbody>
    {% for chat in page_obj %}
    <tr>
      <td>{{ chat.id }}</td>
      <td>
        {% for user in chat.participants.all %}
          {{ user.get_full_name|default:user.email }}{% if not forloop.last %}, {% endif %}
        {% empty %}
          No participants
        {% endfor %}
      </td>
      <td>{{ chat.created_at|date:"d.m.Y H:i" }}</td>
      <td>{{ chat.updated_at|date:"d.m.Y H:i" }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="4" class="text-center">No chats found.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
