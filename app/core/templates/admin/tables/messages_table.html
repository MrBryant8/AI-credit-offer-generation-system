{% extends '../../admin-dashboard.html' %}

{% block data %}
<table class="table table-striped table-bordered align-middle">
  <thead class="table-light">
    <tr>
      <th>ID</th>
      <th>Sender</th>
      <th>Recipient</th>
      <th>Content Preview</th>
      <th>Sent At</th>
      <th>Read</th>
    </tr>
  </thead>
  <tbody>
    {% for message in page_obj %}
    <tr>
      <td>{{ message.id }}</td>
      <td>{{ message.sender.get_full_name|default:message.sender.email }}</td>
      <td>{{ message.recipient.get_full_name|default:message.recipient.email }}</td>
      <td>{{ message.content|truncatechars:50 }}</td>
      <td>{{ message.sent_at|date:"d.m.Y H:i" }}</td>
      <td>{% if message.is_read %}Yes{% else %}No{% endif %}</td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="text-center">No messages found.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
